<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SooshARPG | Kumo and Lottie</title>
  <link rel="shortcut icon" type="image/png" href="img/favicon.png"/>
  
  <!-- CSS Stylesheet -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="css/kumo.css" />
</head>
<body>
  <div id="loadingOverlay" class="loading">Loading&#8230;</div>
  <ul class="tab">
    <li><a href="javascript:void(0)" class="tablinks" onclick="openTab(event, 'General')" id="defaultOpen">Villager Info</a></li>
    <li><a href="javascript:void(0)" class="tablinks" onclick="openTab(event, 'Skills')">Life Skills Experience</a></li>
    <li><a href="javascript:void(0)" class="tablinks" onclick="openTab(event, 'Inventory')">Inventory</a></li>
    <li><a href="javascript:void(0)" class="tablinks" onclick="openTab(event, 'Crafting')">Crafting</a></li>
    <li><a href="javascript:void(0)" class="tablinks" onclick="openTab(event, 'Prompts')">Prompts</a></li>
    <li><a href="javascript:void(0)" class="tablinks" onclick="openTab(event, 'Achievements')">Achievements</a></li>
    <li><a href="javascript:void(0)" class="tablinks" onclick="openTab(event, 'Bandana')">Bandana</a></li>
    <li><a href="javascript:void(0)" class="tablinks" onclick="openTab(event, 'Generator')">Generator</a></li>
  </ul>

  <div id="General" class="tabcontent">
    <div class="container-fluid">
      <div class="col-md-4">
        <div class="kumoimage"><img src="img/kumo.png"></div>
        <div id="experienceStatistics"></div>
        <div id="lifeSkillsMiniStatistics"></div>
      </div>
      <div class="col-md-8">
        <h3>Profile</h3>
        <br>
        <b>Name:</b> Kumo the Soosh, Lottie the Spider<br>
        <b>Pronouns:</b> He/Him for Kumo, She/Her for Lottie<br>
        <b>Food/Drink:</b> <a target="_blank" href="http://files.recipetips.com/images/recipe/McCormick/Sweet_Spider_Cakes.jpg">Sweet Spider Cakes</a><br>
        <b>Village:</b> Spicy Village<br>
        <b>Personality:</b> Energetic, Childlike, Optimistic, Absentminded, Outspoken, Enthusiastic, Unrestrained<br>
        <br>
        <a target="_blank" href="http://pepper-wood.deviantart.com/art/Soosh-ARPG-Kumo-and-Lottie-661632308"><button type="button" class="btn btn-primary">ARPG Application</button></a>
        <a target="_blank" href="http://toyhou.se/616866.kumo-and-lottie"><button type="button" class="btn btn-primary">Toyhou.se Profile</button></a>
        <a target="_blank" href="http://soosharpg.deviantart.com/"><button type="button" class="btn btn-info">dA Group</button></a>
        <a target="_blank" href="http://soosharpg.weebly.com/"><button type="button" class="btn btn-info">Weebly Site</button></a>
        <br>
        <h3>Magic</h3>
        <br>
        <b>Domestic or Combat:</b> Domestic<br>
        <b>Magic Ability:</b> Shoots spider web (yes, like Spiderman)<br>
        <br>
        <h3>Notable Relationships</h3>
        <br>
        <b>Friends and Family:</b> Unknown<br>
        <b>Rivals and Enemies:</b> Unknown<br>
        <b>Significant Other(s):</b> Unknown<br>
      </div>
    </div>
  </div>

  <div id="Skills" class="tabcontent">
    <div class="container-fluid">
      <div id="lifeSkillStatistics" class="col-md-4"></div>
      <div id="lifeSkillPromptStatistics" class="col-md-8"></div>
    </div>
  </div>

  <div id="Inventory" class="tabcontent">
    <div id="inventoryInner"></div>
  </div>

  <div id="Crafting" class="tabcontent">
    <div id="results"></div>
  </div>

  <div id="Prompts" class="tabcontent">
    <div class="controls">
      <button type="button" class="btn btn-primary control" data-filter="all">ALL</button>
      ||
      <button type="button" class="btn btn-prompts control" data-filter=".promptsPrompt">Prompts</button>
      <button type="button" class="btn btn-default control" data-filter=".questsPrompt">Quests</button>
      ||
      <button type="button" class="btn btn-alchemy control" data-filter=".alchemyPrompt">Alchemy</button>
      <button type="button" class="btn btn-angling control" data-filter=".anglingPrompt">Angling</button>
      <button type="button" class="btn btn-hunting control" data-filter=".huntingPrompt">Hunting</button>
      <button type="button" class="btn btn-gathering control" data-filter=".gatheringPrompt">Gathering</button>
      <button type="button" class="btn btn-mining control" data-filter=".miningPrompt">Mining</button>
      <button type="button" class="btn btn-woodcutting control" data-filter=".woodcuttingPrompt">Wood-Cutting</button>
    </div>

    <div id="promptsResult" class="promptsContainer"></div>
  </div>

  <div id="Achievements" class="tabcontent">
    Key: <span class="achievementsButton bg-tutorial">Tutorial Achievement</span>, <span class="achievementsButton bg-exclusive">Exclusive Achievement</span>, <span class="achievementsButton bg-quest">Quest Achievement</span>, <span class="achievementsButton bg-lifeskills">Life Skills Achievement</span>
    <table class="table">
      <thead><tr><th>No.</th><th>Achievement Name</th><th>Description</th><th>Awarded</th></tr></thead>
      <tbody>
        <tr class="bg-tutorial"><th scope="row">#001</th><td>A Hero Is Born</td><td>Be accepted into the SooshARPG for the first time.</td><td>February 2017</td></tr>
        <tr class="bg-tutorial"><th scope="row">#002</th><td>Strike a Cord</td><td>Join the Culario Discord Server.</td><td>February 2017</td></tr>
        <tr class="bg-exclusive"><th scope="row">#003</th><td>The Alpha Dog</td><td>Receive an Early Access Pass to the ARPG.</td><td>February 2017</td></tr>
        <tr class="bg-quest"><th scope="row">#007</th><td>Soda is my Sweet Prince</td><td>Complete the 'Sleeping Beauty' Alchemy Quest</td><td>March 2017</td></tr>
        <tr class="bg-exclusive"><th scope="row">#018</th><td>What Is Love (2017)</td><td>Participate in the 2017 Valentine's Day Prompts.</td><td>February 2017</td></tr>
        <tr class="bg-lifeskills"><th scope="row">#019</th><td>On The Road to Greatness</td><td>Unlock Rookie Knowledge Milestone in any Life Skill.</td><td>February 2017</td></tr>
        <tr class="bg-exclusive"><th scope="row">#029</th><td>Happy Hobbies (2017)</td><td>Participate in the March 2017 Prompt.</td><td>March 2017</td></tr>
        <tr class="bg-exclusive"><th scope="row">#030</th><td>Hear My Alpha Bark</td><td>Complete the Alpha Tester Survey</td><td>February 2017</td></tr>
        <tr class="bg-exclusive"><th scope="row">#031</th><td>Spring Has Sprung (2017)</td><td>Participate in the 2017 Spring Has Sprung Prompt.</td><td>April 2017</td></tr>
      </tbody>
    </table>
  </div>

  <div id="Bandana" class="tabcontent">
    <a href="#" data-toggle="tooltip" data-placement="bottom" title="Alpha Tester Charm"><img src="img/alpha_tester_charm.png"></a>
  </div>
  
  <div id="Generator" class="tabcontent">
    <div class="container"><form class="form-horizontal" action="" method="post">
      <!-- DailyType input-->
      <div class="form-group">
        <label class="col-md-3 control-label" for="dailyType">Daily Type</label>
        <div class="col-md-9">
          <select id="dailyType" class="form-control">
            <option value="Angling">Angling</option>
            <option value="Gathering">Gathering</option>
            <option value="Hunting">Hunting</option>
            <option value="Mining">Mining</option>
            <option value="Wood-cutting">Wood-cutting</option>
          </select>
        </div>
      </div>

      <!-- Location input-->
      <div class="form-group">
        <label class="col-md-3 control-label" for="locationType">Location</label>
        <div class="col-md-9">
          <select id="locationType" class="form-control">
            <option value="The Thickets">The Thickets</option>
            <option value="The Midwoods">The Midwoods</option>
            <option value="The Thorns">The Thorns</option>
            <option value="The Solitude">Mount Solitude</option>
            <option value="The Lake of Reflections">Lake of Reflections</option>
          </select>
        </div>
      </div>

      <!-- Button -->
      <div class="form-group">
        <div class="col-md-3"></div>
        <div class="col-md-9 text-right">
          <button type="button" class="btn btn-primary btn-block" onclick="getDailyText()">Generate Daily</button>
        </div>
      </div>
      
      <!-- Daily Result textarea -->
      <div class="form-group">
        <label class="col-md-3 control-label" for="dailyOutput">Daily Result</label>
        <div class="col-md-9">
          <textarea class="form-control" id="dailyOutput" name="message" rows="5"></textarea>
        </div>
      </div>
      
      <!-- copyToClipboard Button -->
      <div class="form-group">
        <div class="col-md-3"></div>
        <div class="col-md-9 text-right">
          <button type="button" id="copyToClipboard" class="btn btn-primary btn-sm btn-block">Copy Daily Result to Clipboard</button>
        </div>
      </div>
    </form></div>
  </div>

  <!-- Javascript -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="js/modernizr.custom.js"></script>
  <script type="text/javascript" src="js/tabletop.js"></script>
  <script src="js/taffy.js"></script>
  <script src="js/mixitup.min.js"></script>
  <script>
  // -------------------------------------------------------------------------------
  // Global Variables
  var expLevels = TAFFY();
  var statExpLevels = TAFFY();
  var allItems = TAFFY();
  var recipes = TAFFY();
  var InitStats = TAFFY();
  var Inventory = TAFFY();
  var Prompts = TAFFY();
  var SOOSHNAME;
  var EXPERIENCE;
  var SWIRL_SEEDS;
  
  var stats = TAFFY();
  
  // doc ready -> getPublicDBs -> getSooshDBs -> initializeData
  
  // ===============================================================================
  $(document).ready(function(){
    // Prepare all the database information
    a = Tabletop( { key: 'https://docs.google.com/spreadsheets/d/1NSErMCIB65_hfdfSK0fts_5-97wJJWwW9-mntUHOFFY/pubhtml',
                    callback: getPublicDBs,
                    wanted: [ "expLevels", "statExpLevels", "allItems", "recipes" ],
                    debug: true } );
  });
  
  // -------------------------------------------------------------------------------
  // read public google spreadsheet for general information
  function getPublicDBs(data, tabletop) {
    $.each( tabletop.sheets("expLevels").all(), function(i, entry) {
      expLevels.insert({"id":parseInt(entry.id),
                        "exp":parseInt(entry.exp),
                        "runningTotalExp":parseInt(entry.runningTotalExp)
      });
    });
    $.each( tabletop.sheets("statExpLevels").all(), function(i, entry) {
      statExpLevels.insert({"id":parseInt(entry.id),
                            "level":entry.level,
                            "exp":parseInt(entry.exp),
                            "runningTotalExp":parseInt(entry.runningTotalExp),
                            "progress":entry.progress
      });
    });
    $.each( tabletop.sheets("allItems").all(), function(i, entry) {
      allItems.insert({"name":entry.name,
                       "lifeSkill":entry.lifeSkill,
                       "description":entry.description,
                       "type":entry.type,
                       "rarity":entry.rarity,
                       "location":entry.location
      });
    });
    $.each( tabletop.sheets("recipes").all(), function(i, entry) {
      recipes.insert({"recipeID":parseInt(entry.recipeID),
                      "recipeName":entry.recipeName,
                      "lifeSkillLevel":parseInt(entry.lifeSkillLevel),
                      "quantity":parseInt(entry.quantity),
                      "name":entry.name
      });
    });
    b = Tabletop( { key: 'https://docs.google.com/spreadsheets/d/1aeWMbDI-uR6w9smgxHJl366hZlP7wuV-wzqTgyXwiHE/pubhtml',
                callback: getSooshDBs,
                wanted: [ "Stats", "Inventory", "Prompts" ],
                debug: true } );
  }
  
  // -------------------------------------------------------------------------------
  function getSooshDBs(data, tabletop) {
    $.each( tabletop.sheets("Stats").all(), function(i, entry) {
      InitStats.insert({"key":entry.key,
                        "value":entry.value
      });
    });
    $.each( tabletop.sheets("Inventory").all(), function(i, entry) {
      Inventory.insert({"quantity":parseInt(entry.quantity),
                        "name":entry.name
      });
    });
    $.each( tabletop.sheets("Prompts").all(), function(i, entry) {
      Prompts.insert({"promptOrQuest":entry.promptOrQuest,
                      "questType":entry.questType,
                      "name":entry.name,
                      "imgUrl":entry.imgUrl,
                      "promptUrl":entry.promptUrl
      });
    });
    initializeData();
  }
  
  // ===============================================================================
  function initializeData() {
    // set the stats-specific variables
    SOOSHNAME = InitStats({key:"SOOSHNAME"}).last().value;
    EXPERIENCE = parseInt(InitStats({key:"EXPERIENCE"}).last().value);
    SWIRL_SEEDS = parseInt(InitStats({key:"SWIRL SEEDS"}).last().value);
    
    stats.insert({"exp":parseInt(InitStats({key:"Alchemy EXP"}).last().value),"name":"Alchemy"});
    stats.insert({"exp":parseInt(InitStats({key:"Angling EXP"}).last().value),"name":"Angling"});
    stats.insert({"exp":parseInt(InitStats({key:"Hunting EXP"}).last().value),"name":"Hunting"});
    stats.insert({"exp":parseInt(InitStats({key:"Gathering EXP"}).last().value),"name":"Gathering"});
    stats.insert({"exp":parseInt(InitStats({key:"Mining EXP"}).last().value),"name":"Mining"});
    stats.insert({"exp":parseInt(InitStats({key:"Wood-Cutting EXP"}).last().value),"name":"Wood-cutting"});
    printExperience();
    printLifeSkillsExperience();
    printInventory();
    printRecipes();
    printPrompts();
    
    var containerEl = document.querySelector('.promptsContainer');
    var mixer = mixitup(containerEl);
    
    $("#loadingOverlay").css({'display':'none'});
  }
  
  // -------------------------------------------------------------------------------
  // function to print out the homepage experience bar
  function printExperience() {
    var finalString = "";
    var currentLevel = 99;
    expLevels().each(function (expLevel) {
      if (((EXPERIENCE - expLevel.runningTotalExp) < expLevel.exp) && (currentLevel == 99)) {
        currentLevel = expLevel.id;
      }
    });
    finalString = "<div class='container-fluid'><div class='row'><div class='col-md-6'><b>Current Level:</b> ";
    finalString += currentLevel;
    finalString += "</div><div class='col-md-3'><div class='smallerText'>" + EXPERIENCE + " Total Exp. Earned</div></div><div class='col-md-3'><div class='smallerText'>";
    finalString += (EXPERIENCE-(expLevels({id:currentLevel}).first()).runningTotalExp) + "/" + (expLevels({id:currentLevel}).first()).exp + " Exp. Towards Next Level</div></div></div>"; 
    finalString += "<div class='progress'><div class='progress-bar progress-bar-primary progress-bar-striped active' role='progressbar' aria-valuenow='40' aria-valuemin='0' aria-valuemax='100' style='width:";
    var percentage = Math.round(100*((EXPERIENCE-(expLevels({id:currentLevel}).first()).runningTotalExp)/(expLevels({id:currentLevel}).first()).exp));
    if (percentage == 0) { finalString += "5"; }
    else { finalString += percentage; }
    finalString += "%'>" + percentage + "%</div></div></div>";
    $("#experienceStatistics").html(finalString);
  }
  
  // -------------------------------------------------------------------------------
  // helper function to determine where each skill level resides
  function getCurrentLevel(lifeskillexp) {
    var finalid = 99;
    var expDiff = 0;
    statExpLevels().each(function (expLvl) {
      // determine which level the skill is currently at
      if (((lifeskillexp - expLvl.runningTotalExp) < expLvl.exp) && (finalid == 99)) {
        finalid = expLvl.id;
        expDiff = lifeskillexp - expLvl.runningTotalExp;
      }
    });
    return [finalid-1,expDiff];
  }
  
  // -------------------------------------------------------------------------------
  // function to print out the bars with all the life skills experience stats
  function printLifeSkillsExperience() {
    var finalString = "";
    var miniString = "<center><table class='table table-sm'><tbody><tr>";
    var miniCounter = 0;
    stats().each(function (lifeSkill) {
      if (miniCounter == 3) { miniString += "</tr><tr>"; }
      var levelresult = getCurrentLevel(lifeSkill.exp);
      miniString += "<td><button type='button' class='btn btn-block btn-" + (statExpLevels({id:levelresult[0]}).first()).progress + "'>" + (statExpLevels({id:levelresult[0]}).first()).level + " " + lifeSkill.name + "</button></td>";
      finalString += "<div class='container-fluid'><b>" + lifeSkill.name + ":</b> ";
      finalString += (statExpLevels({id:levelresult[0]}).first()).level + "<div class='smallerText'>";
      var levelCap = (statExpLevels({id:(levelresult[0]+1)}).first()).exp;
      finalString += levelresult[1] + "/" + levelCap + " Exp.</div><div class='progress'><div class='progress-bar progress-bar-";
      finalString += (statExpLevels({id:levelresult[0]}).first()).progress + " progress-bar-striped active' role='progressbar' aria-valuenow='40' aria-valuemin='0' aria-valuemax='100' style='width:";
      var percentage = Math.round(100*(levelresult[1]/levelCap));
      if (percentage == 0) { finalString += "5"; }
      else { finalString += percentage; }
      finalString += "%'>" + percentage + "%</div></div></div>";
      miniCounter += 1;
    });
    miniString += "</tr></tbody></table></center>";
    $("#lifeSkillStatistics").html(finalString);
    $("#lifeSkillsMiniStatistics").html(miniString);
  }
  
  // -------------------------------------------------------------------------------
  // function to print out the database of inventory items
  function printInventory() {
    var finalString = "";
    finalString += "<table class='table table-striped'><thead><tr><th>Quantity</th><th>Item Name</th><th>Obtained Via</th><th>Location</th></tr></thead><tbody>";
    finalString += "<tr class='bg-warning'><th scope='row'>" + SWIRL_SEEDS + "</th><td><img src='img/seeds.png' style='height:50px;'> Swirl Seeds</td><td></td><td></td></tr>";
    Inventory().order("name desc"); // sort in alphabetical order
    Inventory().each(function (inventItem) {
      if (inventItem.quantity > 0) {
        finalString += "<tr><th scope='row'>" + inventItem.quantity + "</th><td>" + inventItem.name + "</td><td>" + allItems({name:inventItem.name}).last().lifeSkill + "</td><td>" + allItems({name:inventItem.name}).last().location + "</td></tr>";
      }
    });
    finalString += "</tbody></table>";
    $("#inventoryInner").html(finalString);
  }
  
  // -------------------------------------------------------------------------------
  // function to return valid and invalid recipes
  function printRecipes() {
    lastID = recipes().max("recipeID");
    recipeString = "";
    for (i = 0; i <= lastID; i++) {
      recipeString += recipeCheck(i);
    }
    $('#results').html(recipeString);
  }
  
  // -------------------------------------------------------------------------------
  // function to go through a recipe's ingredients and verify if the inventory can make it
  function recipeCheck(id) {
    var recipeString = ".<span class='tooltip'><span class='top'></span><span class='middle'>";
    var recipeFlag = true; // turns false otherwise
    var currentRecipe = recipes({recipeID:id});
    var levelName = statExpLevels({id:recipes({recipeID:id}).first().lifeSkillLevel}).first().level;
    if (stats({name:"Alchemy"}).first().levelID >= recipes({recipeID:id}).first().lifeSkillLevel) {
      recipeString += "<font color='green'>Level Required: " + levelName + "</font><br>";
    } else {
      recipeString += "<font color='red'>Level Required: " + levelName + "</font><br>";
      recipeFlag = false;
    }
    currentRecipe.each(function (ingredient) {
      var inventoryItem = Inventory({name:ingredient.name}).first();
      if (inventoryItem.quantity >= ingredient.quantity) {
        recipeString += "<font color='green'>" + inventoryItem.quantity + "/" + ingredient.quantity + " " + ingredient.name + "</font><br>";
      } else {
        if (inventoryItem.quantity > 0) {
          recipeString += "<font color='red'>" + inventoryItem.quantity + "/" + ingredient.quantity + " " + ingredient.name + "</font><br>";
        } else {
          recipeString += "<font color='red'>0/" + ingredient.quantity + " " + ingredient.name + "</font><br>";
        }
        recipeFlag = false;
      }
    });
    recipeString += "</span><span class='bottom'></span></span></a><br></div>";
    if (recipeFlag==true) {
      recipeString = "<div class='craftingItem'><a href='#' class='tt'>I <font color='green'>can</font> make " + recipes({recipeID:id}).first().recipeName + recipeString;
    } else {
      recipeString = "<div class='craftingItem'><a href='#' class='tt'>I <font color='red'>cannot</font> make " + recipes({recipeID:id}).first().recipeName + recipeString;
    }
    return recipeString;
  }
  
  // -------------------------------------------------------------------------------
  // function to print out the mixitup grid of prompts
  function printPrompts() {
    promptString = "";
    // alchemy, angling, hunting, gathering, mining, woodcutting
    lifeSkillNames = ["Alchemy","Angling","Hunting","Gathering","Mining","Wood-Cutting"];
    lifeSkillPrompts = ["","","","","",""];
    Prompts().each(function (promptEntry) {
      if (promptEntry.promptOrQuest == "quest") {
        promptString += "<div class='mix questsPrompt " + promptEntry.questType + "Prompt'>";
        if (promptEntry.questType == "alchemy") { lifeSkillPrompts[0] += "<li><a target='_blank' href='" + promptEntry.promptUrl + "'>Sleeping Beauty</a></li>"; }
        else if (promptEntry.questType == "angling") { lifeSkillPrompts[1] += "<li><a target='_blank' href='" + promptEntry.promptUrl + "'>Sleeping Beauty</a></li>"; }
        else if (promptEntry.questType == "hunting") { lifeSkillPrompts[2] += "<li><a target='_blank' href='" + promptEntry.promptUrl + "'>Sleeping Beauty</a></li>"; }
        else if (promptEntry.questType == "gathering") { lifeSkillPrompts[3] += "<li><a target='_blank' href='" + promptEntry.promptUrl + "'>Sleeping Beauty</a></li>"; }
        else if (promptEntry.questType == "mining") { lifeSkillPrompts[4] += "<li><a target='_blank' href='" + promptEntry.promptUrl + "'>Sleeping Beauty</a></li>"; }
        else if (promptEntry.questType == "wood-cutting") { lifeSkillPrompts[5] += "<li><a target='_blank' href='" + promptEntry.promptUrl + "'>Sleeping Beauty</a></li>"; }
      } else if (promptEntry.promptOrQuest == "prompt") {
        promptString += "<div class='mix promptsPrompt'>";
      }
      promptString += "<a target='_blank' href='" + promptEntry.promptUrl + "'>";
      promptString += "<div class='card-image'><img src='img/" + promptEntry.imgUrl + "'></div>";
      promptString += "<div class='card-content'><span class='card-title'>" + promptEntry.name + "</span>";
      promptString += "</div></a></div>";
    });
    for (i=0; i<3; i++) {
      promptString += "<div class='gap'></div>";
    }
    lifeSkillPromptString = "";
    for (i=0; i<lifeSkillPrompts.length; i++) {
      lifeSkillPromptString += "<div class='container-fluid'>";
      lifeSkillPromptString += "<b>" + lifeSkillNames[i] + " Quests Completed:</b><ul>";
      if (lifeSkillPrompts[i] == "") { lifeSkillPromptString += "<li>none</li>"; }
      else { lifeSkillPromptString += lifeSkillPrompts[i]; }
      lifeSkillPromptString += "</ul></div>";
    }
    $("#promptsResult").html(promptString);
    $("#lifeSkillPromptStatistics").html(lifeSkillPromptString);
  }
  
  </script>
  <script>
    $("#copyToClipboard").click(function(){
      $("#dailyOutput").select();
      document.execCommand('copy');
    });
    
    function getDailyText() {
      var dailyStr = ":devnpconigiri: Daily for ";
      var today = new Date();
      dailyStr += (today.getMonth()+1) + "/" + today.getDate() + "/" + (today.getFullYear()%100);
      dailyStr += ". " + SOOSHNAME + " will go <b>" + document.getElementById("dailyType").value;
      dailyStr += "</b> in <b>" + document.getElementById("locationType").value + "</b>.";
      $("#dailyOutput").html(dailyStr);
    }
  </script>
  <script>
    function openTab(evt, cityName) {
      var i, tabcontent, tablinks;
      tabcontent = document.getElementsByClassName("tabcontent");
      for (i = 0; i < tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
      }
      tablinks = document.getElementsByClassName("tablinks");
      for (i = 0; i < tablinks.length; i++) {
          tablinks[i].className = tablinks[i].className.replace(" activeTab", "");
      }
      document.getElementById(cityName).style.display = "block";
      evt.currentTarget.className += " activeTab";
    }

    // Get the element with id="defaultOpen" and click on it
    document.getElementById("defaultOpen").click();
  </script>
  <script>
    $(document).ready(function(){
      $('[data-toggle="tooltip"]').tooltip();   
    });
  </script>
</body>
</html>